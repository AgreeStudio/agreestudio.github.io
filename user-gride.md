#  使用手册
## 1. 工程相关操作

### 1.1 创建工程
1. 顶部菜单栏选择 [工程] - [创建工程] -[选择工程类型]
2. 填写工程项目信息,[应用名称],[应用说明],[应用地址]----工程文件要保存的地址,默认为workspace路径下。
![创建工程](/images/user-guide/创建工程.png)
3. 点击浏览，会弹出浏览文件夹的弹窗，选择想要放置创建工程的路径。
![创建工程](/images/user-guide/浏览文件夹.gif)
4. 点击[完成]后,工程创建成功,在左侧导航栏区域即可查看到当前创建的工程

### 1.2 启动工程

1.  顶部菜单栏选择 [工程] - [启动工程] 用以启动工程，只有当工程正常启动后，vueMDEditor 才可以正常工作。
2.  当用户创建，导入，AgreeStudio 会提示用户是否直接启动工程，或者安装依赖并启动。
3.  启动工程时，AgreeStudio 能简单提示工程是否启动，以及失败原因以及错误码并且展示在辅助视图中。
    ![启动工程](/images/user-guide/启动工程.gif)

### 1.3 导入工程
1.  顶部菜单栏选择 [工程] - [导入工程] 会展示之前导入过agreeStudio的工程。![导入工程](/images/user-guide/导入工程.gif)
2.  点击菜单中的更多，会弹窗选择导入新的工程。
3.  前端工程只允许存在一个，当用户导入或创建是会提示给用户已存在前端工程是否继续
## 2. 工程文件(夹)相关操作

### 2.1 新建文件(夹)
1. 在文件树文件(夹)右键 - [新建文件(夹)]
![新建文件](/images/user-guide/新建文件1.png)
2. 在对话框中输入文件(夹)名
![新建文件](/images/user-guide/新建文件2.gif)
3. 文件名通过校验后，创建文件(夹)成功


### 2.2 重命名文件(夹)
1. 在文件树文件(夹)右键 - [重命名]
![重命名文件](/images/user-guide/重命名文件1.png)
2. 在对话框中输入新文件名
![重命名文件](/images/user-guide/重命名文件2.png)
3. 文件名通过校验后，重命名文件成功

### 2.3 删除文件(夹)
1. 在文件树文件(夹)右键 - [删除]
![删除文件](/images/user-guide/删除文件.png)

### 2.4 在资源管理器中显示
1. 在文件树文件(夹)右键 - [在资源管理器中显示]
![在资源管理器中显示](/images/user-guide/在资源管理器中显示.png)

### 2.5 查看文件(夹)属性
1. 在文件树文件(夹)右键 - [属性]
![查看属性](/images/user-guide/查看属性.gif)

## 3. 前端工程开发
	当前AgreeStudio开发平台支持Webpack、gulp两种前端脚手架的适配。我们在脚手架继续保留npm run dev的运行模式的情况下，特意增加了npm run des开发模式；用于在开发平台中对应用实时编译、渲染。  

### 3.1 vue文件编辑
  在文件树双击或右键选择打开方式,vue_editor即可以可视化编辑方式打开vue文件
  #### Vue-md 页面编辑
  1.文件打开方式新增[vue编辑器(MD模式)],支持组件库快捷键输入。
  ![vue编辑器(MD模式)](/images/user-guide/vue编辑器(MD模式).gif)
  #### aui组件库输入辅助提示
  1.在MD编辑器模式下输入aui就会提示给用户，相应的组件。
  ![输入辅助](/images/user-guide/aui输入辅助.gif)
  #### SDK组件库输入辅助提示
  1.在MD编辑器模式下输入AgreeASdk,SDK的组件就会提示给用户。
  ![输入辅助](/images/user-guide/sdk输入辅助.gif)


  <!-- #### 可视化页面编辑
  *左侧选择 [页面] 进入页面编辑模式*
  - 添加组件
    在左侧工具栏中选择某个组件、拖动至页面中即可快速的在页面中添加一个组件
    ![添加组件](/images/user-guide/添加组件.gif)
  - 修改组件属性
    选中某个组件，右侧属性区显示了该组件的所有属性，选择某一属性即可编辑，并支持添加自定义属性、绑定动态属性值
    ![修改组件属性](/images/user-guide/修改组件属性1.gif)
    ![修改组件属性](/images/user-guide/修改组件属性2.gif)
  - 删除组件
    选中某个组件，顶部右侧工具栏中删除按钮即变为激活状态，点击删除按钮即可删除该组件
    ![删除组件](/images/user-guide/删除组件.gif)
  - 组件事件绑定
    选中组件，在右侧事件区显示了可供绑定的事件，下拉菜单中显示了methods域的方法，选择某一方法即可为组件绑定事件，并支持绑定自定义事件
    ![组件绑定事件](/images/user-guide/组件绑定事件.gif)
  - 页面整体编辑
    可通过拖拽、点击等方式进行复杂的编辑.
    ![页面整体编辑](/images/user-guide/页面整体编辑.gif)
  - 页面大纲联动编辑
    可通过对左侧大纲内容的选中，关联到页面中对应组件的选中;大纲拖动组件改变，页面也相应改变;大纲选中组件右键菜单，点击[show Info]字段会在agreeStudio左下角展示当前选中组件的文本信息，点击[Copy]字段会复制当前选中的组件，[Paste]字段会展示二级菜单,[before paste]表示向当前选中的组件之前粘贴，[inner pate]表示向当前选中的组件内部粘贴(提示：当要粘贴的组件是当前选中组件的非法孩子是，inner pater按钮不可以点击),[next pate]表示向当前选中的组件之后粘贴；
    ![页面大纲联动编辑](/images/user-guide/页面大纲联动编辑.gif)
  - 项目预览
    在可视化编辑视图顶部工具栏可以预览项目的运行状态、横竖屏显示、缩放比例、更改设备等操作
    ![项目预览](/images/user-guide/项目预览.gif)

  #### 样式表编辑
  *左侧选择 [样式表] 进入样式表编辑模式*
  - 样式表编辑<p>
    这里可以修改Vue文件的style节点的样式表<p>
    样式表目前默认为全局样式表，scope域在未来版本加入
    ![样式表编辑](/images/user-guide/stylesheet.gif)
  - 组件的样式编辑(element.style)<p>
    在页面选项卡选中组件，在右侧页面点击样式选项卡，单击element.style区域，就可以编辑组件样式。编辑完成后需要点击保存按钮。
    ![组件的样式编辑](/images/user-guide/elementstyle.gif)
  - 查看当前选中组件的样式表<p>
    点击组件，在右侧展示当前组件的所有样式表
    ![查看当前选中组件的样式表](/images/user-guide/findstyle.gif)
  - 查看当前命中样式表会影响哪些组件<p>
    将鼠标悬浮到样式表上，就可以在页面区域看到影响的组件背景变蓝了
    ![查看当前命中样式表会影响哪些组件](/images/user-guide/findelement.gif)
  - 样式表的添加<p>
    将鼠标悬浮到任意样式表上，点击左上角的添加按钮
    ![样式表的添加](/images/user-guide/styleadd.gif)
  - 样式表的删除<p>
    将鼠标悬浮到要删除的样式表上，点击左上角的删除按钮
    ![样式表的删除](/images/user-guide/styledelete.gif)
  - 样式表的修改<p>
    ![样式表的修改](/images/user-guide/stylemodify.gif)
    点击要修改的样式表，就可以编辑该样式表 -->

<!-- ### 3.2 自定义组件
  1.在`{当前开发工程}/src/custom-components`文件夹右键 - [新建自定义组件] 输入自定义组件名称即可快速创建一个自定义组件
  ![创建自定义组件](/images/user-guide/创建自定义组件.gif)
  2.选择`{自定义组件名称}.vue`文件以添加页面元素与属性、事件等内容
  ![编辑自定义组件内容](/images/user-guide/编辑自定义组件内容.gif)
  3.选择`{自定义组件名称}.definition.json`文件，编辑该自定义组件的名称、描述、属性、事件等信息
  ![编辑自定义组件定义](/images/user-guide/编辑自定义组件定义.gif)
  4.点击下方[保存并同步到AgreeStudio]按钮，即可在工具箱中显示
  5.在工程页面中使用该组件
  ![使用自定义组件](/images/user-guide/使用自定义组件.gif) -->

### 3.3 模版
#### 3.3.1 创建模版应用工程
  - 顶部菜单栏创建：选择[工程] - [创建工程] - [模板应用]
  - 提取模版时自动创建
  ![自动创建模版工程](/images/user-guide/自动创建模版工程.gif)

#### 3.3.2 单文件模版的提取和创建
  1. 被允许提取的单页面模版，仅存在于前端工程的activities和modules目录下
  2. 单页面模版文件的后缀为’.vue’
  3. 存放单文件模版的目录为single-page，其中relyIndex.js为后期存放依赖文件，description.json为存放模版概述和详细说明的文件
  ![单文件](/images/user-guide/单文件模版的提取和创建.gif)

#### 3.3.3 多文件交易模版的提取和创建
  1. 被允许提取的多页面模版，仅存在于前端工程的modules目录下
  2. 多页面模版为文件夹
  3. 存放单文件模版的目录为multi-page，其中relyIndex.js为后期存放依赖文件，description.json为存放模版概述和详细说明的文件
  ![多文件交易](/images/user-guide/多文件交易模版的提取和创建.gif)

### 3.4 json文件编辑
  json类型文件支持可视化编辑方式
  ![jsonEditor](/images/user-guide/jsonEditor.gif)

### 3.5 aft文件编辑
#### 基本操作
  - 图元的添加、删除、编辑等与lfc等编辑器类似
  - 支持创建线、设置方向
  - 支持选择多个节点编辑公共属性
  ![aft基本操作](/images/user-guide/aft基本操作.gif)

#### 表格操作
  - 支持创建表格、增加(删除)行(列)、合并(拆分)单元格等操作
  ![aft表格](/images/user-guide/aft表格.gif)

#### 页面属性设置
  - 支持创建、选择纸张，支持选择背景图片
  ![aft页面属性设置](/images/user-guide/aft页面属性设置.gif)

### 3.6 其他类型文件编辑
  其它文本类型文件使用文本编辑器编辑
   ![文本编辑器](/images/user-guide/文本编辑器.gif)

### 3.7 图片预览
  图片类型支持图片预览、缩放操作
  ![图片预览](/images/user-guide/图片预览.gif)

### 3.8 辅助视图
  1.辅助视图中分为[终端],[输出],[调试控制台],[问题]四部分。
  ![辅助视图](/images/user-guide/辅助视图.gif)
  2.[终端]视图用户可以输入命令；
  ![终端](/images/user-guide/终端.gif)

## 4. 服务工程开发

### 4.1 服务工程目录结构说明
    1. bank: 存储银行自定义组件
    2. business: 存储公共业务逻辑描述[lfc]文件
    3. dataDictionary: 存储数据字典[ade]文件
    4. dataModel: 存储服务数据模型[xm]文件
    5. resource: 存储公共资源文件
    6. servers: 存储微服务描述[csd]文件
    7. .csp: 存储已发布的服务相关信息

### 4.2 新建服务工程
  - 说明：工程创建
    ![创建服务工程](/images/user-guide/创建服务工程.gif)
  #### 4.2.2 新建数据字典文件[ade]
  - 说明：ade文件建在dataDictionary文件夹下
    ![新建ade文件](/images/user-guide/新建ade文件.gif)
  #### 4.2.3 新建数据模型文件[xm]
  - 说明：xm文件建在dataModel文件夹下
    ![新建xm文件](/images/user-guide/新建xm文件.gif)
  #### 4.2.4 新建微服务文件[csd]
  - 说明：csd文件建在servers文件夹下
    ![新建csd文件](/images/user-guide/新建csd文件.gif)
   #### 4.2.5 新建业务逻辑文件[lfc]
  - 说明：lfc文件建在business文件夹下
    ![新建lfc文件](/images/user-guide/新建lfc文件.gif)
   #### 4.2.6 新建报文文件[rcd]
  - 说明：rcd文件建在messages文件夹下
    ![新建rcd文件](/images/user-guide/新建rcd文件.gif)

### 4.3 LFC文件编辑
#### 基本操作
  - 从左侧工具箱选择节点，工具箱上方可搜索，按住节点并拖拽至画面中即可完成节点添加
  - 在节点中心拖拽出线至另一节点即可完成连线
  - 选择节点，右侧属性区'属性'页展示了该节点所有可编辑的属性
  - 选择节点 / 线，按`delete`键即可删除
  - 选择结束节点，右侧属性区'出口'页可添加、删除、编辑出口信息
  ![lfc文件基本操作](/images/user-guide/lfc文件基本操作.gif)

#### 辅助操作
  - 支持跨流程复制多个节点，粘贴位置为当前鼠标位置
  - 鼠标悬停在节点上即可显示出入参信息
  - 左侧大纲视图列出了所有节点，支持 'ctrl + 单击'多选
  ![lfc文件辅助操作](/images/user-guide/lfc文件辅助操作.gif)

#### 节点资源绑定
  - LFC节点在属性区 '参数配置'域点击预览，即可搜索选择工程中其它lfc文件进行绑定，绑定后点击跳转即可打开绑定的lfc文件
  - Server节点在属性区 '服务绑定'域点击选择，即可选择全部可绑定的服务，点击任意服务即可完成绑定
  - 修改容器云地址，可编辑`{Agree Studio根目录}\configuration\configServer.properties`文件最后一项`cn.com.agree.studio.config.service.address`并重启
  ![节点资源绑定](/images/user-guide/节点资源绑定.gif)

#### 变量引用视图
  右侧属性区选择'变量引用'页，即可查看 该文件中`varMap()`、`dm()`的变量引用情况，并可快速定位节点
  ![变量引用视图](/images/user-guide/变量引用视图.gif)
  
### 4.4 文件引用
  #### 4.3.1 ade文件的继承
  - 说明：ade文件的继承，弹窗支持快速搜索功能
  ![ade文件的继承](/images/user-guide/ade文件的继承.gif)
  #### 4.3.2 xm文件引用ade和xm
  - 说明：xm文件的引用，弹窗支持快速搜索功能
  ![xm引用ade和xm](/images/user-guide/xm文件引用ade和xm.gif)
  #### 4.3.3 csd文件引用ade、xm、lfc
  - 说明：csd文件的引用,弹窗支持快速搜索功能
  ![csd文件引用](/images/user-guide/csd文件的引用.gif)
  #### 4.3.4 lfc文件引用ade、lfc，服务已发布成功的csd
  - 说明：lfc文件的引用，支持属性编辑功能， 弹窗支持快速搜索功能
  ![csd文件引用](/images/user-guide/lfc文件的引用.gif)
   #### 4.3.5 csd文件内部创建lfc
   - 说明：csd文件内部支持创建lfc,并自动关联该lfc
  ![csd文件创建lfc](/images/user-guide/csd创建lfc.gif)

### 4.5 csd服务发布
  - 说明: 服务发布，第一次发布需要手动配置ip和端口, 发布需要等待一段时间，发布成功后会有提示弹窗
  ![服务发布](/images/user-guide/服务发布.gif)
  - 说明：发布成功后的弹窗
  ![服务发布成功](/images/user-guide/服务发布成功.png)

### 4.6 图码双型
  *打开LFC文件，展开辅助视图，选择图形命令视图*

#### 4.6.1 符号及特殊标识符
  - `->` 创建、连线命令
  - `=` 普通属性、入参赋值符
  - `=>` 出参赋值符
  - `.` 出入参属性标识符
  - `$` 普通属性标识符
  - `:` uri标识符
  - `#`、`##` 下方、强制下方（暂未支持）标识符
  - `@`、`@@` 右侧、强制右侧（暂未支持）标识符
  - `0` 开始节点
  - `E` 结束节点
  - `e` 节点的异常出、入口
  - `;` 命令分隔符，用于同时执行多条命令

#### 4.6.2 创建节点
  格式 ：`[节点showId].[出口号] -> [LFC | Component] : [引用路径 | 技术组件name] [# | @] [节点showId]`
  > 1号出口可省略

  > 不输入位置信息，则自动放置在源节点下方

  例如：
  - `1.2 -> Component:StringIsNull # 1` （在1号节点2号出口处创建StringIsNull技术组件，放置于1号节点下方）
  - `2 -> Component:StringIsNull` （在2号节点1号出口处创建StringIsNull技术组件，放置于2号节点下方）
  - `1 -> LFC:/FCServer/bank/BasicComm.lfc @ 2` （在1号节点1号出口处创建LFC并绑定`/FCServer/bank/BasicComm.lfc`，放置于2号节点右侧）

#### 4.6.3 参数赋值
##### 入参赋值
  格式 ：`[节点showId].[属性名] = [属性值]`

  例如：
  - `1.name = name` （将1号节点name入参的值设置为name）

##### 出参赋值
  格式 ：`[节点showId].[属性名] => [属性值]`

  例如：
  - `1.result => result` （将1号节点result出参的值设置为result）
  - `1.response => "success"` （将1号节点response出参的值设置为"success"）

##### 普通属性赋值
  格式 ：`[节点showId]$[属性名] = [属性值]`

  例如：
  - `1$caption = 设置返回信息` （将1号节点caption属性设置为 设置返回信息）

#### 4.6.4 连线
  格式 ：`[源节点showId].[出口号] -> [目标节点showId] | [目标节点showId].[入口号]`
  > 1号出口可省略

  例如：
  - `1.2 -> 3` （将1号节点2号出口连接至3号节点）
  - `1 -> 4` （将1号节点1号出口连接至4号节点）
  - `1.e -> E.2` （将1号节点异常出口连接至异常节点2号入口）

#### 4.6.5 删除节点、线
  格式 ：`rm [节点showId] [节点showId].[出口号]`
  > 删除节点、线可在一条命令中同时执行

  例如：
  - `rm 3 4.1` （删除3号节点，删除4号节点1号出口的连线）

#### 4.6.6 复制节点
  格式 ：`clone [节点showId] [# | @] [节点showId]`

  例如：
  - `clone 3 # 3` （复制3号节点，放置于3号节点下方）

#### 4.6.7 显示节点信息
  格式 ：`[节点showId]`
  > 点击某一条属性即可简单进行编辑，回车即可生效

  例如：
  - `3` （显示3号节点属性） 

#### 4.6.8 其它命令
- `ls` 所有节点信息
- `save` 保存
- `layout` 自动布局
- `undo` 撤销
- `redo` 重做
- `cls` 清屏

#### 4.6.9 输入辅助
- `tab` 切换提示项
- `alt + /` 打开提示面板，使用上下选择，回车确认

## 5. 服务部署
#### 5.1 服务工程支持服务部署工程
  ![服务部署](/images/user-guide/服务部署.gif)
## 6. 项目调试
  支持通过devTools面板进行调试，可通过如下方式打开调试面板：
  1. F12热键打开
  2. 顶部菜单栏选择 [帮助] - [打开开发者工具]

## 7. 首选项
  用户可通过首选项设置Agree Studio的各项配置
  1. 用户未设置首选项时，其默认值分别为：
    - 字体大小：14
    - 主题风格：Visual Studio Dark
    - 编辑器打开方式：VUE编辑器(MD模式)
  2. 顶部菜单栏选择 [辅助] - [首选项]
  ![首选项](/images/user-guide/首选项.png)
  3. 首选项界面用户可根据自身需求设置
  ![设置首选项](/images/user-guide/首选项.gif)
  

## 8. 搜索
*左侧选择 [搜索] 进入搜索视图，导航不再提供文件搜索功能*
### 8.1 内容搜索 / 替换
#### 普通模式
  - 选择'内容'页，在'内容'栏输入搜索的文件内容，工程类型勾选'前端'或'服务'即可对导航中的工程进行搜索
  - 搜索结束后点击任意一行结果即可快速定位内容
  - 搜索完成后，在'替换文本'栏输入内容，点击[全局替换]后即可完成内容替换
  ![普通模式](/images/user-guide/普通模式.gif)

#### 高级模式
  - 在导航中任意文件夹右键选择[在文件夹中搜索]即可进入高级模式进行精确路径的搜索
  - 使用方式与普通模式一致
  ![高级模式](/images/user-guide/高级模式.gif)

### 8.2 文件搜索
  - 选择'文件'页，输入文件名（支持带的`/`路径），即可搜索
  - 单击搜索结果，以文本方式打开，右键可选择其它打开方式
  ![文件搜索](/images/user-guide/文件搜索.gif)

## 9. 构建工程
  1. 顶部菜单栏选择 [文件] - [构建工程]
  2. 等待底部状态栏显示 `工程构建成功` 即为构建成功，相关文件保存在`{Agree Studio根目录}\studiobuild\app\build`下
  
  ![构建工程](/images/user-guide/构建工程.png)

## 10. 静态资源展示模块
  通过快捷键[ctrl + shift+C] 或顶部菜单栏选择 [视图] - [组件库资源展示] 查看Agree Studio打开工程支持的全部组件库资源
  ![静态资源展示模块](/images/user-guide/静态资源展示模块.gif)

## 11. 快捷操作
  通过快捷键[ctrl + l] 或顶部菜单栏选择 [辅助] - [热键展示] 查看Agree Studio支持的全部快捷键
  ![快捷键](/images/user-guide/快捷键.png)